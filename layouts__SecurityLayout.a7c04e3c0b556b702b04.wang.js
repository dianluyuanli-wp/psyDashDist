(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"0jlH":function(e,t,n){"use strict";n.r(t);var r=n("WmNS"),a=n.n(r),c=n("9og8"),o=n("fWQN"),s=n("mtLc"),i=n("Nsem"),u=n("oZsa"),l=n("yKVA"),f=n("q1tI"),p=n.n(f),d=n("/MKj"),h=n("Hx5s"),m=n("WHYC"),y=n("s4NR");function g(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(u["a"])(e);if(t()){var a=Object(u["a"])(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i["a"])(this,n)}}var v=function(e){Object(l["a"])(n,e);var t=g(n);function n(){var e;Object(o["a"])(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),e.state={isReady:!1},e}return Object(s["a"])(n,[{key:"componentDidMount",value:function(){var e=Object(c["a"])(a.a.mark((function e(){var t,n,r,c;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.setState({isReady:!0}),t=this.props,n=t.dispatch,r=t.accessToken,c=t.name,n&&(n({type:"login/getTokenFromLocalStorage"}),n({type:"user/fetchCurrent",payload:{name:c||localStorage.getItem("name"),token:r||localStorage.getItem("tk")}}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this.state.isReady,t=this.props,n=t.children,r=t.loading,a=t.currentUser,c=a&&a.name,o=Object(y["stringify"])({redirect:window.location.href});return!c&&r||!e?p.a.createElement(h["d"],null):c?n:p.a.createElement(m["Redirect"],{to:"/user/login?".concat(o)})}}]),n}(p.a.Component);t["default"]=Object(d["c"])((function(e){var t=e.user,n=e.loading,r=e.login;return{currentUser:t.currentUser,loading:n.models.user,accessToken:r.accessToken,name:r.name}}))(v)}}]);